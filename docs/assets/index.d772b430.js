import{d as m,r as _,o as i,c,a as t,w as v,v as g,t as d,b,e as B,f as h,F as x,g as $,h as A,i as C}from"./vendor.2f4a48db.js";const F=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function n(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=n(e);fetch(e.href,s)}};F();const p="https://deno-simple-sns.deno.dev",L=t("div",null,"\u30E6\u30FC\u30B6\u540D",-1),M=t("div",null,"\u30E1\u30C3\u30BB\u30FC\u30B8",-1),w=m({emits:["submit"],setup(r,{emit:a}){const n=_(""),u=_(""),e=async()=>{const s={"Content-Type":"application/json"},o=JSON.stringify({username:n.value,message:u.value});await fetch(`${p}/messages`,{method:"POST",mode:"no-cors",headers:s,body:o}),a("submit")};return(s,o)=>(i(),c("div",null,[L,t("div",null,[v(t("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=l=>n.value=l)},null,512),[[g,n.value]])]),M,t("div",null,[v(t("textarea",{placeholder:"\u6295\u7A3F\u3057\u305F\u3044\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u5165\u529B","onUpdate:modelValue":o[1]||(o[1]=l=>u.value=l)},null,512),[[g,u.value]])]),t("div",null,[t("button",{onClick:e},"\u6295\u7A3F")])]))}});var f=(r,a)=>{const n=r.__vccOpts||r;for(const[u,e]of a)n[u]=e;return n};const E={class:"message"},O=b(),N={class:"messageValue"},S={class:"like"},T=m({props:{id:null,username:null,message:null,likes:null,createdAt:null},emits:["like"],setup(r,{emit:a}){const n=r,u=async()=>{await fetch(`${p}/messages/like?id=${n.id}`,{method:"POST",mode:"no-cors"}),a("like")};return(e,s)=>(i(),c("div",E,[t("div",null,[t("strong",null,d(r.username),1),O,t("small",null,d(r.createdAt),1)]),t("div",N,[t("div",null,d(r.message),1),t("div",S,[t("span",null,"LIKE\u3055\u308C\u305F\u6570 : "+d(r.likes),1),t("button",{onClick:u,class:"likeButton"},"+1 LIKE")])])]))}});var V=f(T,[["__scopeId","data-v-5faad7a0"]]);const D={};function I(r,a){return i(),c("h1",null,"deno-simple-sns")}var P=f(D,[["render",I]]);const j={class:"main"},K={class:"messages"},U=m({setup(r){const a=_([]),n=async()=>{const s=[...await(await fetch(`${p}/messages`,{method:"GET",mode:"cors"})).json()].sort((o,l)=>o.id<l.id?-1:1);a.value=s};return B(async()=>{await n()}),(u,e)=>(i(),c("div",j,[h(P),t("div",K,[(i(!0),c(x,null,$(a.value,({id:s,username:o,message:l,likes:y,created_at:k})=>(i(),A(V,{key:s,id:s,username:o,message:l,likes:y,createdAt:k,onLike:n},null,8,["id","username","message","likes","createdAt"]))),128))]),h(w,{onSubmit:n})]))}});var q=f(U,[["__scopeId","data-v-9fb59124"]]);C(q).mount("#app");
